title: Welcome to Gidro OS
properties:
  mode: "run-once"
screens:
  first-screen:
    source: yafti.screen.title
    values:
      title: "Welcome to Gidro OS"
      icon: "/path/to/icon"
      description: |
        This guided installer will help you get started with your new system.
  can-we-modify-your-flatpaks:
    source: yafti.screen.consent
    values:
      title: Welcome, Traveler!
      condition:
        run: flatpak remotes --columns=name | grep fedora
      description: |
        We have detected the limited, Fedora-provided Flatpak remote on your system, whose applications are usually missing important codecs and other features. This step will therefore remove all basic Fedora Flatpaks from your system! We will instead switch all core Flatpak applications over to the vastly superior, unfiltered Flathub. If you don't want to do this, simply exit this installer.
      actions:
        - run: flatpak remote-delete --system --force fedora
        - run: flatpak remote-delete --user --force fedora
        - run: flatpak remote-delete --system --force fedora-testing
        - run: flatpak remove --system --noninteractive --all
        - run: flatpak remote-add --if-not-exists --system flathub https://flathub.org/repo/flathub.flatpakrepo
        - run: flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo
  check-system-flathub:
    source: yafti.screen.consent
    values:
      title: Missing Flathub Repository (System)
      condition:
        run: flatpak remotes --system --columns=name | grep flathub | wc -l | grep '^0$'
      description: |
        We have detected that you don't have Flathub's repository on your system. We will now add that repository to your system-wide list.
      actions:
        - run: flatpak remote-add --if-not-exists --system flathub https://flathub.org/repo/flathub.flatpakrepo
  check-user-flathub:
    source: yafti.screen.consent
    values:
      title: Missing Flathub Repository (User)
      condition:
        run: flatpak remotes --user --columns=name | grep flathub | wc -l | grep '^0$'
      description: |
        We have detected that you don't have Flathub's repository on your current user account. We will now add that repository to your account.
      actions:
        - run: flatpak remote-add --if-not-exists --user flathub https://flathub.org/repo/flathub.flatpakrepo
  applications:
    source: yafti.screen.package
    values:
      title: Application Installer
      show_terminal: true
      package_manager: yafti.plugin.flatpak
      package_manager_defaults:
        user: false
        system: true
      groups:
        Core Apps:
          description: Core applications for the GNOME desktop environment.
          default: true
          packages:
            - Boxes: org.gnome.Boxes
            - Calculator: org.gnome.Calculator
            - Calendar: org.gnome.Calendar
            - Camera: org.gnome.Snapshot
            - Contacts: org.gnome.Contacts
            - Clocks: org.gnome.clocks
            - Document Viewer: org.gnome.Evince
            - Maps: org.gnome.Maps
            - Text Editor: org.gnome.TextEditor
            - Music: com.github.neithern.g4music
            - Videos: com.github.rafostar.Clapper
            - Images: org.gnome.Loupe
            - Web: com.github.Eloston.UngoogledChromium
            - System Monitor: io.missioncenter.MissionCenter
            - Secrets: org.gnome.World.Secrets
            - Sticky Notes: com.vixalien.sticky
            - Paint: com.github.flxzt.rnote
        System Apps:
          description: System applications as an additional toolkit for improving user experience.
          default: true
          packages:
            - Flatseal (Permission Manager): com.github.tchx84.Flatseal
            - Extension Manager: com.mattjakeman.ExtensionManager
            - Gradience: com.github.GradienceTeam.Gradience
            - Easy Effects: com.github.wwmm.easyeffects
            - Bottles: com.usebottles.bottles         
        User Apps:
          description: User applications which are generally used.
          default: false
          packages:
             - Thunderbird: org.mozilla.Thunderbird
             - Discord: com.discordapp.Discord
             - Telegram: org.telegram.desktop
             - FreeTube: io.freetubeapp.FreeTube
             - Dialect: app.drey.Dialect
             - Fragments: de.haeckerfelix.Fragments
             - ASCII Draw: io.github.nokse22.asciidraw
             - InkScape: org.inkscape.Inkscape
             - Mousai: io.github.seadve.Mousai
             - NewsFlash: io.gitlab.news_flash.NewsFlash
             - LibreOffice: org.libreoffice.LibreOffice
             - Tagger: org.nickvision.tagger
             - Parabolic: org.nickvision.tubeconverter
             - Nicotine+: org.nicotine_plus.Nicotine
             - Tenacity: org.tenacityaudio.Tenacity
             - GitHub Desktop: io.github.shiftey.Desktop
        Gaming Apps:
          description: User applications which are used for gaming.
          default: false
          packages:
            - PCSX2: net.pcsx2.PCSX2
            - Space Cadet Pinball: com.github.k4zmu2a.spacecadetpinball
            - Grapejuice (Roblox): net.brinkervii.grapejuice
            - ProtonPlus: com.vysp3r.ProtonPlus
  configure-gidroos:
    source: yafti.screen.package
    values:
      title: Additional GidroOS packages & configs
      show_terminal: true
      package_manager: yafti.plugin.run
      groups:
        Post-setup (DO NOT DISABLE):
          description: Performs necessary post-setup for GidroOS.
          default: true
          packages:
          - Post-setup: just post-setup
        OBS:
          description: Installs advanced screen recorder with tons of plugins in distrobox container.
          default: false
          packages:
          - OBS: just install-obs-studio-portable
        Hide GRUB:
          description: Hides GRUB text output on boot.
          default: false
          packages:
          - Hide GRUB: just hide-grub
        Remove window close button:
          description: Removes window close button. Useful for mouses which have special button mapped for window closing.
          default: false
          packages:
          - Remove window close button: just hide-close-button          
         
  final-screen:
    source: yafti.screen.title
    values:
      title: "All done!"
      icon: "/path/to/icon"
      links:
        - "Install More Applications":
            run: /usr/bin/gnome-software
        - "Website":
            run: /usr/bin/xdg-open https://github.com/fiftydinar/gidro-os
      description: |
        Thanks for trying Gidro OS, I hope you enjoy it!
